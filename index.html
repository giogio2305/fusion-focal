<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="./slick/slick.css"/>
    <link rel="stylesheet" type="text/css" href="./slick/slick-theme.css"/>
    <link rel="stylesheet" href="style.css">

    <title>Fusion FOCAL</title>
</head>
<body>
    <div class="itw">
        <div class="si">
            <img src="./assets/placeholder.svg" alt="placeholder">
        </div>
        <div class="st">
            <div class="slider single-item">
                <div class="slick-slider" data-slidernav="Item">
                    <h1 class="tt">
                        croquer la vie a pleines dents
                        </h1>
                        <p class="pr">
                            Le brossage des dents est une étape importante dans son hygiène de vie quotidienne qui permet de maintenir les dents en bonne santé. Et pour vous aider à accomplir ce geste tout en participant activement à la protection de l’environnement nous avons conçu Green Taste. Une solution écologique qui préserve vos dents et la planète. 
                        </p>
                </div>
    
                <div class="slick-slider" data-slidernav="Item">
                    <span class="sbt">Subheading</span>
                    <h1 class="tt">
                        IMAGE WITH TEXT
                        </h1>
                        <p class="pr">
                            Use image with text to give your customers insight into your brand. Select imagery and text that relates to your style and story.
                        </p>
                </div>
            </div>
            <div class="progressBarContainer">
                <button class="ibt item">
                    <span data-slick-index="0" class="progressBar"></span>
                    Item
                </button>
                <button class="ibt item">
                    <span data-slick-index="1" class="progressBar"></span>
                    Item
                </button>
            </div>
        </div>
    </div>


    <script type="text/javascript" src="./slick/jquery-1.11.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.4/gsap.min.js"></script>
<!-- <script type="text/javascript" src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script> -->
<script type="text/javascript" src="./slick/slick.min.js"></script>

<script type="text/javascript">
    $(document).ready(function(){
  $('.slider').slick({
    slidesToShow: 1,
    slidesToScroll: 1,
    infinite: true,
    arrows: false,
    dots: false,
    autoplay: false,
    speed: 800,

  });
});

var percentTime;
    var tick;
    var time = .1;
    var progressBarIndex = 0;

    $('.progressBarContainer .progressBar').each(function(index) {
        var progress = "<div class='inProgress inProgress" + index + "'></div>";
        $(this).html(progress);
    });

    function startProgressbar() {
        resetProgressbar();
        percentTime = 0;
        tick = setInterval(interval, 10);
    }

    function interval() {
        if (($('.slider .slick-track div[data-slick-index="' + progressBarIndex + '"]').attr("aria-hidden")) === "true") {
            progressBarIndex = $('.slider .slick-track div[aria-hidden="false"]').data("slickIndex");
            startProgressbar();
        } else {
            percentTime += 1 / (time + 5);
            $('.inProgress' + progressBarIndex).css({
                width: percentTime + "%"
            });
            if (percentTime >= 100) {
                $('.single-item').slick('slickNext');
                progressBarIndex++;
                if (progressBarIndex > 2) {
                    progressBarIndex = 0;
                }
                startProgressbar();
            }
        }
    }

    function resetProgressbar() {
        $('.inProgress').css({
            width: 0 + '%'
        });
        clearInterval(tick);
    }
    startProgressbar();
    // End ticking machine

    $('.item').click(function () {
    	clearInterval(tick);
    	var goToThisIndex = $(this).find("span").data("slickIndex");
    	$('.single-item').slick('slickGoTo', goToThisIndex, false);
    	startProgressbar();
    });

    const copies = document.querySelectorAll(".tt");

    function setupSplits(){
        $(document).ready(function(){
            $(".split-line").wrap("<div class='split-parent'></div>");
        });

        copies.forEach((copy)=>{
            copy.split = new SplitText(copy, {
                type: "lines, words, chars",
                linesClass: "split-line",
            });

            copy.anim = gsap.fromTo(copy.split.lines,
                        { 
                            y: 100,
                            opacity: 0
                        },
                        {
                            y: 0,
                            opacity: 1,
                            stagger: 0.1,
                            duration: 2,
                            ease: 'power4.out',
                        }
)
        })
    }

    setupSplits();
</script>
</body>
</html>